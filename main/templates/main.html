{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="max-w-6xl mx-auto px-4 py-8 font-sans">

  <!-- Header Toko -->
  <div class="text-center mb-10">
    <h1 class="text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-[#A50044] via-[#004D98] to-[#800033] drop-shadow-lg mb-2">
      {{ shop_name }}
    </h1>
    <p class="text-gray-700 text-sm">
      Owner: <span class="font-semibold">{{ owner }}</span> | Class: {{ class }}
    </p>
  </div>

  <!-- Tombol Filter + Add Product + Back -->
  <div class="flex flex-wrap justify-center gap-4 mb-10">
    <a href="?filter=all" 
       class="px-4 py-2 rounded-lg {% if filter_type == 'all' %}bg-[#003366]{% else %}bg-[#004D98]{% endif %} text-white font-semibold hover:bg-[#003366] transition">
      All Products
    </a>
    <a href="?filter=my" 
       class="px-4 py-2 rounded-lg {% if filter_type == 'my' %}bg-[#DAA520]{% else %}bg-[#EDBB00]{% endif %} text-[#004D98] font-semibold hover:bg-[#DAA520] transition">
      My Products
    </a>
    <a href="{% url 'main:create_product' %}" 
       class="px-4 py-2 rounded-lg bg-[#EDBB00] text-[#004D98] font-semibold hover:bg-[#DAA520] transition">
      + Add Product
    </a>
    {% if filter_type == 'my' %}
    <a href="{% url 'main:show_main' %}" 
       class="px-4 py-2 rounded-lg bg-gray-300 text-gray-800 font-semibold hover:bg-gray-400 transition">
       Back to Prev
    </a>
    {% endif %}
  </div>

  <!-- Daftar Produk -->
  {% if products %}
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in products %}
      <div class="bg-white rounded-xl shadow-md hover:shadow-xl transition flex flex-col overflow-hidden">
        
        {% if product.thumbnail %}
          <img src="{{ product.thumbnail.url }}" alt="{{ product.name }}" class="w-full h-44 object-cover">
        {% else %}
          <div class="w-full h-44 bg-gray-200 flex items-center justify-center">
            <span class="text-gray-400 italic">No Image</span>
          </div>
        {% endif %}

        <div class="p-4 flex flex-col flex-grow">
          <h3 class="text-lg font-bold text-gray-800 mb-1">{{ product.name }}</h3>
          <p class="text-[#DAA520] font-semibold mb-2">Rp {{ product.price }}</p>
          <p class="text-gray-600 text-sm flex-grow">{{ product.description }}</p>

          <div class="mt-4 flex flex-wrap gap-2">
            <a href="{% url 'main:product_detail' product.id %}" 
               class="inline-block text-center px-3 py-2 bg-[#004D98] text-white rounded-lg font-semibold hover:bg-[#003366] transition">
               Detail
            </a>

            {% if filter_type == 'my' %}
            <a href="{% url 'main:edit_product' product.id %}" 
               class="inline-block text-center px-3 py-2 bg-[#EDBB00] text-[#004D98] rounded-lg font-semibold hover:bg-[#DAA520] transition">
               Edit
            </a>
            <a href="{% url 'main:delete_product' product.id %}" 
               class="inline-block text-center px-3 py-2 bg-[#A50044] text-white rounded-lg font-semibold hover:bg-[#800033] transition"
               onclick="return confirm('Yakin mau hapus produk ini?');">
               Delete
            </a>
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="bg-white rounded-lg p-8 text-center shadow-md">
    <img src="{% static 'image/no_product.png' %}" alt="Belum ada produk" class="w-28 mx-auto mb-4">
    <p class="text-gray-600 mb-4">Belum ada produk. Yuk tambahkan produk pertamamu!</p>
    <a href="{% url 'main:create_product' %}" class="inline-block px-4 py-2 bg-[#A50044] text-white rounded-lg font-semibold hover:bg-[#800033] transition">
      Tambah Product
    </a>
  </div>
  {% endif %}

</div>
{% endblock %}
